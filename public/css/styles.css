:root {
    /* üêù Colores Colmena/Miel/Dorado (M√ÅS VIBRANTES) */
    --color-primary: #FFD700;     /* Dorado Brillante (Acentos y botones) */
    --color-secondary: #FFC300;   /* √Åmbar/Naranja (Menos agresivo) */
    --color-success: #4CAF50;     /* Verde Claro (Estado OK, vida) */
    --color-warning: #FF9800;     /* Naranja Suave (Advertencia) */
    --color-danger: #F44336;      /* Rojo Vivo (Alerta cr√≠tica) */

    /* Colores Base */
    --color-background: #F0F2F5;  /* Gris claro y moderno */
    --color-card-bg: #FFFFFF;
    --color-text-dark: #212529;   /* Negro profundo para t√≠tulos */
    --color-text-subtle: #7A869A; /* Gris sutil para subt√≠tulos */
    --color-border: #E5E9EC;      /* L√≠neas de borde suaves */
    
    /* Sombras */
    --shadow-small: 0 2px 4px rgba(0, 0, 0, 0.05);
    --shadow-medium: 0 6px 15px rgba(0, 0, 0, 0.12);
}

/* ==================================================== */
/* 1. GENERALES Y RESET */
/* ==================================================== */

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--color-background);
    color: var(--color-text-dark);
    line-height: 1.6;
    /* üéØ NUEVO: Fondo con patr√≥n sutil */
    background-image: radial-gradient(circle at top left, var(--color-border) 1px, transparent 1px);
    background-size: 20px 20px;
}

h1, h2, h3, h4 {
    color: var(--color-text-dark);
    margin-bottom: 10px;
}

/* ==================================================== */
/* 2. LAYOUT PRINCIPAL (GRID - Mobile First) */
/* ==================================================== */

.dashboard-header {
    background: linear-gradient(135deg, var(--color-primary), var(--color-secondary)); /* Degradado */
    color: white;
    padding: 20px 40px;
    text-align: center;
    box-shadow: var(--shadow-medium);
}

.dashboard-header h1 {
    color: white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

.dashboard-container {
    padding: 20px; 
    display: grid;
    grid-template-columns: 1fr; 
    gap: 20px;
    max-width: 1400px;
    margin: 20px auto; 
}

/* Definir el orden correcto de los bloques en m√≥vil */
.latest-data-block { order: 1; }
.status-alerts-block { order: 2; }
.history-block { order: 3; }
.video-block { order: 4; }

hr {
    border: none;
    border-top: 1px solid var(--color-border);
    margin: 20px 0;
}

/* ==================================================== */
/* 3. BLOQUES DE SECCI√ìN (Fondos Comunes) */
/* ==================================================== */

.status-alerts-block, .history-block {
    padding: 20px;
    background-color: var(--color-card-bg); 
    border-radius: 12px; /* M√°s redondeado */
    box-shadow: var(--shadow-small);
}

.video-block {
    padding: 20px;
    background-color: var(--color-card-bg); 
    border-radius: 12px;
    box-shadow: var(--shadow-small);
    display: flex;
    flex-direction: column;
    align-items: center;
}

.video-block iframe {
    width: 100%;
    height: 300px; 
    border: 1px solid var(--color-border);
    border-radius: 8px; /* M√°s redondeado */
}


/* ==================================================== */
/* 4. TARJETAS DE DATOS (Data Cards) */
/* ==================================================== */

.data-cards-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); 
    gap: 20px;
    margin-top: 15px;
}

.data-card {
    background-color: var(--color-card-bg);
    padding: 20px;
    border-radius: 12px; /* M√°s redondeado */
    box-shadow: var(--shadow-small); /* Sombra inicial suave */
    transition: transform 0.2s, box-shadow 0.3s;
    cursor: pointer;
    /* üéØ NUEVO: Borde de color para estilo */
    border-left: 5px solid var(--color-border); 
}

.data-card:hover {
    transform: translateY(-5px); /* Deslizamiento m√°s notable */
    box-shadow: var(--shadow-medium); /* Sombra m√°s fuerte al pasar el mouse */
}

.card-title {
    font-size: 0.9rem;
    color: var(--color-text-subtle);
    margin-bottom: 5px;
    font-weight: 500;
}

.card-value {
    font-size: 2.8rem; /* Un poco m√°s grande */
    font-weight: 700;
    color: var(--color-text-dark);
}

.card-time {
    font-size: 0.85rem;
    color: var(--color-text-subtle);
    margin-top: 8px; /* M√°s separaci√≥n */
    font-style: italic;
}


/* Estilos de la tarjeta de estado (Vista de Gr√°ficos) */
.status-card {
    background-color: var(--color-primary); 
    background: linear-gradient(90deg, var(--color-primary), var(--color-secondary)); /* Degradado */
    color: var(--color-text-dark); 
    border: none;
    border-left: none; /* Quitamos el borde izquierdo aqu√≠ */
    box-shadow: 0 4px 10px rgba(255, 195, 0, 0.4); /* Sombra brillante */
}
.status-card:hover {
    transform: scale(1.03); /* Efecto de crecimiento */
    box-shadow: 0 6px 15px rgba(255, 195, 0, 0.6);
}
.status-card .card-title, 
.status-card .card-status-message h2,
.status-card .card-value {
    color: var(--color-text-dark); 
    font-weight: 600;
}

/* üéØ Colores espec√≠ficos y Bordes IZQUIERDOS para las tarjetas de sensores */
.weight-card { border-left-color: #8b4513; }
.temp-card { border-left-color: var(--color-danger); }
.hum-card { border-left-color: #2196F3; /* Azul m√°s vibrante */ }
.audio-card { border-left-color: var(--color-secondary); }

/* üéØ Aplicar color a los valores para destacarlos */
.weight-card .card-value { color: #8b4513; }
.temp-card .card-value { color: var(--color-danger); }
.hum-card .card-value { color: #2196F3; }
.audio-card .card-value { color: var(--color-secondary); }


/* Estilos de la tarjeta de estado (Vista de Gr√°ficos) */
.status-card .card-value { font-size: 1.8rem; }
.card-status-message h2 { font-size: 1.3rem; margin: 0; }

.data-cards-grid .status-card {
    grid-column: 1 / -1; 
}


/* ==================================================== */
/* 5. BLOQUE DE ALERTAS Y ESTADO (status-alerts-block) */
/* ==================================================== */

.alert-summary {
    padding: 18px; /* M√°s padding */
    border-radius: 8px; /* Menos redondeo que el bloque */
    margin-bottom: 20px;
    text-align: center;
    color: white;
    box-shadow: var(--shadow-small);
    font-weight: 600;
}

.alert-summary h2 { color: white; font-size: 1.6rem; }

/* Colores Din√°micos Aplicados por JS */
.status-initial { background-color: var(--color-text-subtle); }
.status-ok { background-color: var(--color-success); }
.status-warning { background-color: var(--color-warning); }
.status-danger { background-color: var(--color-danger); }

/* Colores Din√°micos Aplicados por JS */
.status-initial { background-color: var(--color-text-subtle); }
.status-ok { background-color: var(--color-success); }
.status-warning { background-color: var(--color-warning); }
.status-danger { background-color: var(--color-danger); }


/* Estilos para la lista de alertas */
.alert-details h3 {
    /* ‚úÖ FIX 1: Hacemos el t√≠tulo oscuro para alto contraste con el fondo blanco */
    color: var(--color-text-dark); 
    font-size: 1.15rem; 
    margin-top: 0;
    margin-bottom: 15px; /* Agregamos m√°s espacio */
    border-bottom: 1px solid var(--color-border);
    padding-bottom: 5px;
}

#alert-list {
    list-style: none;
    padding: 0;
}

#alert-list li {
    padding: 8px 0;
    border-bottom: 1px solid var(--color-border);
    font-size: 0.95rem;
    color: var(--color-text-dark); /* ‚úÖ FIX: Asegura que el texto de la lista sea siempre oscuro */
}

/* Estilos para el detalle de la alerta (solo se aplican al icono) */
.status-alert-icon {
    margin-right: 8px;
    font-size: 1.1em;
}

/* üéØ CORRECCI√ìN: Aplicar color de alerta √öNICAMENTE al icono, no al texto completo del LI */
.status-alert-icon.status-danger { color: var(--color-danger); } 
.status-alert-icon.status-warning { color: var(--color-warning); }
.status-alert-icon.status-ok { color: var(--color-success); }


/* ==================================================== */
/* 6. FILTROS Y GR√ÅFICOS (history-block) */
/* ==================================================== */

/* üéØ NUEVO: Estilo del bot√≥n de hamburguesa (oculto por defecto en escritorio) */
.filter-toggle-btn {
    /* Estado Normal (Cerrado) */
    background-color: var(--color-primary); /* Color primario: Dorado Brillante */
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1rem;
    margin-bottom: 10px;
    transition: background-color 0.2s;
    width: 100%;
    text-align: left;
    
    /* Aseguramos el color del texto del bot√≥n */
    font-weight: 600; 
}

.filter-toggle-btn:hover {
    background-color: var(--color-secondary); 
}

.filter-toggle-btn.active {
    background-color: var(--color-secondary); 
    box-shadow: 0 0 0 2px rgba(255, 195, 0, 0.5); 
}

.filter-form {
    display: flex;
    gap: 15px;
    align-items: flex-end; /* Alinear los botones con los campos */
    flex-wrap: wrap;
    margin-bottom: 20px;
}

.filter-group {
    display: flex;
    flex-direction: column;
}

.filter-group label {
    font-size: 0.85rem;
    color: var(--color-text-subtle);
    margin-bottom: 5px;
}

.filter-group input, .filter-buttons button, .filter-group select {
    padding: 8px 12px;
    border-radius: 4px;
    border: 1px solid var(--color-border);
    font-size: 1rem;
}

.btn-primary {
    background-color: var(--color-secondary);
    color: white;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s;
}

.btn-primary:hover {
    background-color: #e67e22; 
}

.btn-secondary {
    background-color: var(--color-card-bg);
    color: var(--color-text-dark);
    cursor: pointer;
    transition: background-color 0.2s;
}

.btn-secondary:hover {
    background-color: var(--color-border);
}

/* Contenedores de Gr√°ficos */
.charts-block {
    position: relative;
    margin-top: 20px;
    min-height: 400px; /* Ya tiene 400px de m√≠nimo */
}

.chart-container {
    display: none; 
    /* Altura por defecto: 400px. Aumentemos un poco para m√≥vil */
    min-height: 500px; 
}

.chart-container.visible {
    display: block; 
    width: 100%;
    height: 100%; 
}

/* Estilos para la vista General (4 gr√°ficos peque√±os) */
#general-chart-container.visible {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    height: auto; 
}

.chart-general-item {
    height: 350px;
    padding: 10px;
    background-color: var(--color-card-bg); /* ‚úÖ FIX: Fondo blanco para los gr√°ficos */
    border: 1px solid var(--color-border);
    border-radius: 4px;
}

.chart-subtitle {
    font-size: 1rem;
    color: var(--color-text-subtle);
    margin-bottom: 5px;
}

/* Mensaje de no datos */
.no-data-message {
    padding: 30px;
    text-align: center;
    color: var(--color-text-subtle);
    font-style: italic;
}


/* ==================================================== */
/* 7. FOOTER */
/* ==================================================== */

.dashboard-footer {
    text-align: center;
    padding: 20px;
    font-size: 0.85rem;
    color: var(--color-text-subtle);
    background-color: white;
    margin-top: 20px;
    border-top: 1px solid var(--color-border);
}

/* ==================================================== */
/* 8. MEDIA QUERIES (Layouts espec√≠ficos) */
/* ==================================================== */

/* Layout de ESCRITORIO (a partir de 993px) */
@media (min-width: 993px) {
    .dashboard-container {
        grid-template-columns: 3fr 1fr; 
        grid-template-rows: auto 1fr auto; 
        padding: 20px 40px;
    }
    
    .latest-data-block {
        grid-column: 1 / 3; 
        grid-row: 1 / 2;
    }
    
    .history-block {
        grid-column: 1 / 2; 
        grid-row: 2 / 3; 
        height: 100%; 
    }
    
    .status-alerts-block {
        grid-column: 2 / 3; 
        grid-row: 2 / 3;
        height: 100%; 
    }
    
    .video-block {
        grid-column: 1 / 3; 
        grid-row: 3 / 4; 
    }
    
    /* ... (Estilos de Tarjetas en Escritorio) ... */
    .data-cards-grid {
        grid-template-columns: repeat(5, 1fr); 
    }
    
    .data-cards-grid .status-card {
        grid-column: span 1; 
    }

    .filter-toggle-btn {
        display: none;
    }

    .filter-form {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
    }
}

/* Layout de TABLET y M√ìVIL (hasta 992px) */
/* Layout de TABLET y M√ìVIL (hasta 992px) */
@media (max-width: 992px) {
    /* üéØ 5. Tarjetas en m√≥vil: 1x1 (Estado General) + 2x2 (Sensores) */
    .data-cards-grid {
        grid-template-columns: repeat(2, 1fr); 
    }
    
    .data-cards-grid .status-card {
        grid-column: 1 / -1; 
    }
    
    /* üéØ 6. Mostrar el bot√≥n de hamburguesa y l√≥gica de filtros */
    .filter-toggle-btn {
        display: block; 
    }

    /* 1. OCULTAR: El formulario est√° oculto por defecto con la clase 'hidden-mobile' */
    .filter-form.hidden-mobile {
        display: none; 
    }
    
    /* ‚úÖ SOLUCI√ìN FINAL: MOSTRAR. Usamos :not() para que cuando el JS quite la clase, se muestre. */
    /* El selector #ID:not(.clase) es de m√°xima especificidad y fuerza el despliegue. */
    #history-filter-form:not(.hidden-mobile) {
        display: flex; 
        flex-direction: column; 
        align-items: stretch;
    }
    
    /* FIX CR√çTICO: Los 4 gr√°ficos generales se apilan en una sola columna */
    #general-chart-container.visible {
        grid-template-columns: 1fr; 
        gap: 15px; 
    }
    
    /* El iframe de video debe volver a ocupar el 100% */
    .video-block iframe {
        max-width: 100%; 
        height: 300px;
    }

}


/* Ajustes para M√ìVILES PEQUE√ëOS (hasta 576px) */
@media (max-width: 576px) {
    .dashboard-header {
        padding: 15px 20px;
    }
    .dashboard-container {
        padding: 10px;
    }
    
    .data-card {
        padding: 15px;
    }
    
    .card-value {
        font-size: 2rem;
    }
    
    .filter-buttons {
        flex-direction: row;
        gap: 10px;
    }
}